<section class="section" th:fragment="page">
    <div class="card">
        <div class="card-header">
            <h4 class="card-title">Nouvelle Réservation</h4>
        </div>

        <div class="card-body">
            <form th:action="@{/reservations/saisie}" method="post">
                <div class="row g-3">

                    <input type="hidden" name="idSeance" th:value="${idSeance}">
                    <div class="col-md-6">
                        <label for="filmStr" class="form-label">Film</label>
                        <input type="text" class="form-control" id="filmStr"
                            th:value="${film != null ? film.getStrId() : ''}" readonly>
                        <input type="hidden" name="idFilm" th:value="${film != null ? film.idFilm : ''}">
                    </div>

                    <div class="col-md-6">
                        <label for="salleStr" class="form-label">Salle</label>
                        <input type="text" class="form-control" id="salleStr"
                            th:value="${salle != null ? salle.getStrId() : ''}" readonly>
                        <input type="hidden" name="idSalle" th:value="${salle != null ? salle.idSalle : ''}">
                    </div>

                    <div class="col-md-6">
                        <label for="dateSeance" class="form-label">Date de Séance <span
                                class="text-danger">*</span></label>
                        <input type="date" class="form-control" id="dateSeance" name="dateSeance"
                            th:value="${dateSeance}" readonly>
                    </div>

                    <div class="col-md-6">
                        <label for="heure" class="form-label">Heure</label>
                        <input type="text" class="form-control" id="heure" name="heure" th:value="${heure}" readonly>
                    </div>

                    <div class="col-md-6">
                        <label for="idClient" class="form-label">Client <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <select class="form-select" id="idClient" name="idClient" required>
                                <option value="">-- Sélectionner un client --</option>
                                <option th:each="client : ${clients}" th:value="${client.idClient}"
                                    th:text="${client.getStrId() + ' - ' + client.nom}">
                                </option>
                            </select>
                            <a class="btn btn-outline-primary" th:href="@{/clients/saisie}" title="Ajouter un client">
                                <i class="bi bi-plus"></i>
                            </a>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="idClient" class="form-label">Categorie place <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <select class="form-select" id="idCp" name="idCp" required>
                                <option value="">-- Sélectionner une catégorie de place --</option>
                                <option th:each="categorie : ${categoriePlaces}" th:value="${categorie.idCp}"
                                    th:text="${categorie.libelle}">
                                </option>
                            </select>
                            <a class="btn btn-outline-primary" th:href="@{/categories/saisie}" title="Ajouter une catégorie">
                                <i class="bi bi-plus"></i>
                            </a>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <label for="nombrePlaces" class="form-label">Nombre de places <span class="text-danger">*</span></label>
                        <input type="number" class="form-control" id="nombrePlaces" name="nombrePlaces" min="1" required>
                    </div>

                    <!-- <div class="col-12" th:if="${places != null && !places.isEmpty()}">
                        <label class="form-label">Places Disponibles <span class="text-danger">*</span></label>
                        <div class="table-responsive">
                            <table class="table table-striped table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="checkAll">
                                                <label class="form-check-label" for="checkAll"></label>
                                            </div>
                                        </th>
                                        <th>ID Place</th>
                                        <th>Numéro</th>
                                        <th>Catégorie</th>
                                        <th>Prix</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr th:each="place : ${places}">
                                        <td>
                                            <div class="form-check">
                                                <input class="form-check-input place-checkbox" type="checkbox"
                                                    name="idPlaces" th:value="${place.idPlace}"
                                                    th:id="'place' + ${place.idPlace}">
                                                <label class="form-check-label"
                                                    th:for="'place' + ${place.idPlace}"></label>
                                            </div>
                                        </td>
                                        <td th:text="${place.getStrId()}"></td>
                                        <td th:text="${place.numero}"></td>
                                        <td th:text="${place.categoriePlace.libelle}"></td>
                                        <td th:text="${place.PrixPlace} + ' AR'"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div> -->

                    <!-- <div class="col-12" th:if="${places == null || places.isEmpty()}">
                        <div class="alert alert-warning mb-0">
                            Aucune place disponible pour l'instant.
                        </div>
                    </div> -->
                </div>

                <div class="row mt-4">
                    <div class="col-12">
                        <button type="submit" class="btn btn-primary">
                            <i class="bi bi-check-circle"></i> Enregistrer
                        </button>
                        <a th:href="@{/seances/liste}" class="btn btn-secondary">
                            <i class="bi bi-x-circle"></i> Annuler
                        </a>
                    </div>
                </div>
            </form>
        </div>
    </div>
</section>